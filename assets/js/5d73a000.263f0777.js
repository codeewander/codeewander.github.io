"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8537],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>x});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=o.createContext({}),l=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):u(u({},t),e)),n},c=function(e){var t=l(e.components);return o.createElement(s.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},C=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),p=l(n),C=r,x=p["".concat(s,".").concat(C)]||p[C]||d[C]||a;return n?o.createElement(x,u(u({ref:t},c),{},{components:n})):o.createElement(x,u({ref:t},c))}));function x(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,u=new Array(a);u[0]=C;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[p]="string"==typeof e?e:r,u[1]=i;for(var l=2;l<a;l++)u[l]=n[l];return o.createElement.apply(null,u)}return o.createElement.apply(null,n)}C.displayName="MDXCreateElement"},1674:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>u,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>l});var o=n(3117),r=(n(7294),n(3905));const a={title:"React Hook - useContext",id:"useContext",keywords:["useContext","React Hooks"]},u=void 0,i={unversionedId:"react/useContext",id:"react/useContext",title:"React Hook - useContext",description:"useContext \u662f\u4e00\u4e2a React Hook\uff0c\u53ef\u4ee5\u8b80\u53d6\u548c\u8a02\u95b1\u5143\u4ef6\u4e2d\u7684 context",source:"@site/docs/react/useContext.md",sourceDirName:"react",slug:"/react/useContext",permalink:"/docs/react/useContext",draft:!1,tags:[],version:"current",frontMatter:{title:"React Hook - useContext",id:"useContext",keywords:["useContext","React Hooks"]},sidebar:"Docs",previous:{title:"React Hook - useRef",permalink:"/docs/react/useRef"},next:{title:"TypeScript basic",permalink:"/docs/typescript/typescript-intro"}},s={},l=[{value:"\u57fa\u672c\u6982\u5ff5\u8207\u7528\u6cd5",id:"\u57fa\u672c\u6982\u5ff5\u8207\u7528\u6cd5",level:2},{value:"\u900f\u904e context \u66f4\u65b0\u50b3\u905e\u7684\u6578\u64da",id:"\u900f\u904e-context-\u66f4\u65b0\u50b3\u905e\u7684\u6578\u64da",level:3},{value:"\u5275\u5efa useContext \u7684 custom hook",id:"\u5275\u5efa-usecontext-\u7684-custom-hook",level:3},{value:"useContext v.s Redux",id:"usecontext-vs-redux",level:2},{value:"\u53c3\u8003\u8cc7\u6599\uff1a",id:"\u53c3\u8003\u8cc7\u6599",level:2}],c={toc:l},p="wrapper";function d(e){let{components:t,...n}=e;return(0,r.kt)(p,(0,o.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"useContext")," \u662f\u4e00\u4e2a React Hook\uff0c\u53ef\u4ee5\u8b80\u53d6\u548c\u8a02\u95b1\u5143\u4ef6\u4e2d\u7684 context"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const value = useContext(SomeContext);\n")),(0,r.kt)("h2",{id:"\u57fa\u672c\u6982\u5ff5\u8207\u7528\u6cd5"},"\u57fa\u672c\u6982\u5ff5\u8207\u7528\u6cd5"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"useContext")," \u53ef\u7528\u65bc\u5143\u4ef6\u4e4b\u9593\u5171\u4eab\u72c0\u614b\uff0c\u7236\u5c64\u518d\u4e5f\u4e0d\u9700\u8981\u900f\u904e props \u4e00\u5c64\u5c64\u50b3\u72c0\u614b\u5230\u5b50\u5c64\uff0c\u985e\u4f3c\u65bc\u4efb\u610f\u9580\uff0c\u9069\u7528\u65bc\u63a5\u6536\u8cc7\u6599\u5c64\u8207\u7236\u5c64\u5c64\u7d1a\u904e\u591a\u7684\u72c0\u6cc1\u3002"),(0,r.kt)("p",null,"\u9996\u5148\uff0c\u5148\u4f7f\u7528 createContext \u5275\u5efa\u4e00\u500b Context\uff0c\u5728\u6700\u4e0a\u5c64\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"Context.provider"),"\uff0c\u4e26\u5c07\u8981\u50b3\u905e\u7684\u8cc7\u6599\u653e\u5230 value\uff0c\u8981\u63a5\u6536\u8cc7\u6599\u7684\u5b50\u5c64 component \u53ef\u4ee5\u900f\u904e useContext \u53d6\u5f97 values \u7684\u8cc7\u6599"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"// \u5efa\u7acb\u4e00\u500b Context\uff0c\u9810\u8a2d\u503c\u70ba undefined\nconst AuthContext = React.createContext<Auth|undefined>(undefined);\n\n// \u7236\u5c64\u4f7f\u7528 AuthContext.Provider\nfunction App() {\n  return (\n    <AuthContext.Provider\n      value={{\n        id: 1234,\n      }}\n    >\n      <ChildComponent />\n    </ContextStore.Provider>\n  );\n}\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"// \u5b50\u5c64\u4f7f\u7528 useContext \u62ff\u5230\u8cc7\u6599\nfunction ChildComponent() {\n  const value = React.useContext(AuthContext);\n\n  return <span>value.id</span>;\n}\n")),(0,r.kt)("h3",{id:"\u900f\u904e-context-\u66f4\u65b0\u50b3\u905e\u7684\u6578\u64da"},"\u900f\u904e context \u66f4\u65b0\u50b3\u905e\u7684\u6578\u64da"),(0,r.kt)("p",null,"\u53ef\u4ee5\u548c state \u7d50\u5408\uff0c\u5c07\u7236\u5c64\u7684\u72c0\u614b\u4f5c\u70ba context \u503c\u50b3\u905e\u7d66 provider\uff0c\u5018\u82e5 id \u503c\u6539\u8b8a\uff0c\u5247\u5b50\u5c64\u90fd\u6703\u4f7f\u7528\u4f7f\u7528\u65b0\u7684\u503c\u4f86\u91cd\u65b0\u6e32\u67d3"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"function App() {\n    const [id , setId] = useState(1234)\n  return (\n    <AuthContext.Provider\n      value={{id, setId}}\n    >\n      <ChildComponent />\n      <button onClick={()=> setId('2345')} >click</button>\n    </ContextStore.Provider>\n  );\n}\n")),(0,r.kt)("p",null,"\u8981\u6ce8\u610f\u7684\u662f\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"useContext"),' \u53ef\u4ee5\u6709\u591a\u500b provider\xa0\uff0c\u4f46\u4e0b\u5c64\u6703\u8986\u84cb\u4e0a\u5c64\uff0c\u5982\u4e0b\u9762\u7a0b\u5f0f\u78bc App \u548c ChildComponent \u90fd\u4f7f\u7528\u4e86 userContext\uff0c\u4f46\u6e32\u67d3\u6642\uff0c\u5b83\u5011\u5206\u5225\u6703\u4f7f\u7528\u6700\u63a5\u8fd1\u5b83\u5011\u7684\u503c\uff0c\u4e5f\u5c31\u662f\u8aac App \u4f7f\u7528 "User in App"\uff0c\u800c ChildComponent \u4f7f\u7528 "User in ChildComponent"'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// UserContext.js\nimport { createContext } from "react";\n\nexport const UserContext = createContext();\n\n// App.js\nimport React from "react";\nimport { UserContext } from "./UserContext";\n\nfunction App() {\n  return (\n    <UserContext.Provider value="User in App">\n      <div>\n        <h1>App Component</h1>\n        <ChildComponent />\n      </div>\n    </UserContext.Provider>\n  );\n}\n\n// ChildComponent.js\nimport React from "react";\nimport { UserContext } from "./UserContext";\n\nfunction ChildComponent() {\n  return (\n    <UserContext.Provider value="User in ChildComponent">\n      <div>\n        <h2>Child Component</h2>\n      </div>\n    </UserContext.Provider>\n  );\n}\n')),(0,r.kt)("h3",{id:"\u5275\u5efa-usecontext-\u7684-custom-hook"},"\u5275\u5efa useContext \u7684 custom hook"),(0,r.kt)("p",null,"\u6709\u6642\u5019\u5fd8\u8a18\u8a2d\u5b9a provider \u7684 value\uff0c\u5c31\u6703\u5f9e context \u4e2d\u5f97\u5230 undefined\uff0c\u9019\u6642\u5019\u53ef\u4ee5\u900f\u904e\u5275\u5efa\u4e00\u500b custom hook \u4f86\u9032\u884c\u66f4\u597d\u7684\u932f\u8aa4\u8655\u7406"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"//useAuthContext\nconst AuthContext = React.createContext<Auth|undefined>(undefined);\n\nfunction useAuthContext = ()=>{\n    const auth = React.useContext(AuthContext)\n\n    //\u7576 context \u62ff\u5230 undefined \u6642\u6703\u8df3\u51fa\u932f\u8aa4\u63d0\u9192\n    if(auth === undefined){\n        throw new Error('useAuthContext must be used with a AuthContext')\n    }\n    return auth\n}\n\n//component \u4e2d\u4f7f\u7528 useAuthContext\nfunction ChildComponent() {\n  const value = useAuthContext();\n\n  return <span>value.id</span>;\n}\n")),(0,r.kt)("h2",{id:"usecontext-vs-redux"},"useContext v.s Redux"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"useContext")," \u4e3b\u8981\u76ee\u7684\u662f\u89e3\u6c7a\u8cc7\u6599\u6df1\u5c64\u50b3\u905e props drilling \u7684\u554f\u984c; ",(0,r.kt)("inlineCode",{parentName:"li"},"Redux")," \u4e3b\u8981\u76ee\u7684\u662f\u5354\u52a9\u72c0\u614b\u7ba1\u7406\u3002\u96d6\u7136 useReducer \u548c useContext \u642d\u914d\u53ef\u4ee5\u9054\u5230\u985e\u4f3c redux \u7684\u529f\u80fd\uff0c\u4f46\u4e26\u4e0d\u662f\u539f\u672c\u7684\u76ee\u7684"),(0,r.kt)("li",{parentName:"ul"},"\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"li"},"useContext"),"\uff0c\u7576\u503c\u6539\u8b8a\u6642\uff0c\u6240\u6709\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"li"},"useContext")," \u7684\u5143\u4ef6\u90fd\u6703\u91cd\u65b0\u6e32\u67d3(\u672a\u4f7f\u7528 useContext \u7684\uff0c\u4e0d\u6703\u91cd\u8907\u6e32\u67d3); redux \u5247\u662f\u53ea\u6709\u4f7f\u7528\u5230\u6539\u8b8a\u503c\u7684\u5143\u4ef6\u624d\u6703\u91cd\u65b0\u6e32\u67d3"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"useContext")," \u53ef\u4ee5\u6709\u591a\u500b provider\uff0c\u4f46\u4e0b\u5c64\u6703\u8986\u84cb\u6389\u4e0a\u5c64\uff0c\u4e0d\u6703\u5408\u4f75; redux \u53ea\u6709\u4e00\u500b store \u4e14\u653e\u5728 root \u5c64")),(0,r.kt)("h2",{id:"\u53c3\u8003\u8cc7\u6599"},"\u53c3\u8003\u8cc7\u6599\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://zh-hans.react.dev/reference/react/useContext"},"useContext - React docs")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.youtube.com/watch?v=HYKDUF8X3qI&list=PLApy4UwQM3UrZsBTY111R6P4frt6WK-G2&index=5"},"Learn React Hooks: useContext - Simply Explained!")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://leewarrick.com/blog/the-problem-with-context/"},"The Problem with React's Context API")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://blog.yyisyou.tw/bff9cac8/"},"\u70ba\u4ec0\u9ebc\u9700\u8981\u4f7f\u7528 Redux \u5728\u5c08\u6848\u4e0a")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://blog.typeart.cc/redux-vs-use-congtext-use-reducer-and-which-one/"},"redux vs useContext, useReducer\uff0c\u8a72\u600e\u9ebc\u9078\u64c7\uff1f"))))}d.isMDXComponent=!0}}]);